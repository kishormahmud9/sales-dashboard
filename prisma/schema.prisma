// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                String   @id @default(uuid())
  name              String   @db.VarChar(50)
  email             String   @unique
  password          String
  role              Role     @default(sales_member)
  image             String?
  status            Status   @default(active)
  total_queries     Int      @default(0)
  converted_queries Int      @default(0)
  quote_sent        Int      @default(0)
  conversion_rate   Float    @default(0)
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  projects     Project[] @relation("EmployeeProjects")
  soldProjects Project[] @relation("SoldProjects")
}

model Project {
  id                 String             @id @default(uuid())
  employeeId         String
  employee           User               @relation("EmployeeProjects", fields: [employeeId], references: [id])
  profileName        ProfileName
  clientName         String
  source             Source
  serviceLine        ServiceLine
  country            String
  quote              String // Link type
  queryStatus        QueryStatus
  followupCount      Int                @default(0)
  conversationStatus ConversationStatus
  soldById           String
  soldBy             User               @relation("SoldProjects", fields: [soldById], references: [id])
  comment            String?
  remark             String?
  createdAt          DateTime           @default(now())
  updatedAt          DateTime           @updatedAt
}

enum Role {
  superAdmin
  sales_tl
  sales_member
  operation_tl
  operation_member
  sales_admin
  operation_admin
}

enum Status {
  active
  inactive
  banned
}

enum ProfileName {
  BYTE_CRAFT
  DRIFT_AI
  FIRE_AI
  AI_BYTE
  AI_HOOK
  AI_NEST
  ZEBRA_APP
  TURTLE_APP
  LOGIC_AI
}

enum Source {
  QUERY
  BRIEF
  PROMOTED
  DIRECT_ORDER
  REFERRAL
}

enum ServiceLine {
  CUSTOM_WEBSITE
  MOBILE_APP
  AI_MOBILE_APP
  AI_WEBSITE
  AI_AGENT
  CHATBOT
  NOT_CLARIFIED
  N8N_AUTOMATION
  BUG_FIXING
}

enum QueryStatus {
  CUSTOM_OFFER_SENT
  BRIEF_CUSTOM_OFFER_SENT
  BRIEF_REPLIED
  QUOTE_SENT
  FEATURE_LIST_SENT
  NO_RESPONSE
  PASS
  SPAM
  LOW_FOCUS_COUNTRY
  CONVERSATION_RUNNING
}

enum ConversationStatus {
  NEED_TO_FOLLOW_UP
  FOLLOW_UP_DONE
  SOLD
  NEVER_CAME
  FOUND_OTHER_DEV
  NO_NEED_TO_FOLLOW_UP
}
